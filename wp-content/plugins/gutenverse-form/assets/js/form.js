/*! For license information please see form.js.LICENSE.txt */
(()=>{var e={500:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=s(e,i(r)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=s(t,r));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element;function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,r,n){return(r=function(e){var r=function(e){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const s=window.wp.i18n,a=gutenverseCore.components,u=gutenverseCore.icons,l=window.wp.apiFetch;var c=r.n(l),m=r(500),f=r.n(m);const d=gutenverseCore.controls,p=gutenverseCore.backend,v=window.wp.hooks,_=window.lodash,g=window.ReactJSXRuntime;function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function(e){var t=e.values,r=e.updateValue;return(0,g.jsxs)("div",{className:"form-tab-body",children:[(0,g.jsx)(p.ControlText,b({id:"title",title:(0,s.__)("Form Title","gutenverse-form"),description:(0,s.__)("This title will be searchable in Gutenverse Form Builder Block.","gutenverse-form"),value:t.title},e)),(0,g.jsx)(p.ControlCheckbox,{id:"require_login",title:(0,s.__)("Require Login","gutenverse-form"),description:(0,s.__)("Hide form if the user is not logged in.","gutenverse-form"),value:t.require_login,updateValue:r}),(0,g.jsx)(p.ControlCheckbox,{id:"user_browser",title:(0,s.__)("Capture User Browser Data","gutenverse-form"),description:(0,s.__)("Store user's browser data such as ip, browser name, etc. (If you served website for countries with GDPR law, please make sure you've setup notice for your user regarding the datas you collect.)","gutenverse-form"),value:t.user_browser,updateValue:r}),(0,g.jsx)(p.ControlText,{id:"form_success_notice",title:(0,s.__)("Success Notice on Submit","gutenverse-form"),description:(0,s.__)("This will be your success notice when form is successfully submitted. (If empty, notice will not be showed).","gutenverse-form"),value:t.form_success_notice,updateValue:r}),(0,g.jsx)(p.ControlText,{id:"form_error_notice",title:(0,s.__)("Error Notice on Submit","gutenverse-form"),description:(0,s.__)("This will be your error notice when form is failed on submit. (If empty, notice will not be showed).","gutenverse-form"),value:t.form_error_notice,updateValue:r}),(0,g.jsx)(p.ControlCheckbox,{id:"use_captcha",title:(0,s.__)("Use Captcha","gutenverse-form"),description:(0,s.__)("Check this if you want to use captcha.","gutenverse-form"),value:t.use_captcha,updateValue:r})]})},j=function(e){var t=e.values,r=e.updateValue;return(0,g.jsxs)("div",{className:"form-tab-body",children:[(0,g.jsx)(p.ControlCheckbox,{id:"user_confirm",title:(0,s.__)("Confirmation Mail to User","gutenverse-form"),description:(0,s.__)("Send confirmation email to user. (To be able to send email, please make sure you've setup SMTP correctly).","gutenverse-form"),value:t.user_confirm,updateValue:r}),t.user_confirm&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(p.ControlCheckbox,{id:"auto_select_email",title:(0,s.__)("Auto Select Email","gutenverse-form"),description:(0,s.__)('This will automatically select emails inputted from email\'s fields. Please make sure the input field is "email" and not "text"',"gutenverse-form"),value:t.auto_select_email,updateValue:r}),!t.auto_select_email&&(0,g.jsx)(p.ControlText,{id:"email_input_name",title:(0,s.__)("Use Input's Name","gutenverse-form"),description:(0,s.__)("Only the selected input name will be sent email. (e.g : input-email).","gutenverse-form"),defaultValue:"input-email",value:t.email_input_name,updateValue:r}),(0,g.jsx)(p.ControlText,{id:"user_email_subject",title:(0,s.__)("Email's Subject","gutenverse-form"),description:(0,s.__)("This will be your email's subject or title. (e.g : Thank you for your submission).","gutenverse-form"),value:t.user_email_subject,updateValue:r}),(0,g.jsx)(p.ControlText,{id:"user_email_form",title:(0,s.__)("Email's Sender","gutenverse-form"),description:(0,s.__)("Enter the sender email by which you want to send email to user. (Please make sure you use the same email in your SMTP setup).","gutenverse-form"),value:t.user_email_form,updateValue:r}),(0,g.jsx)(p.ControlText,{id:"user_email_reply_to",title:(0,s.__)("Email's Reply Target","gutenverse-form"),description:(0,s.__)("Enter email where user can reply/ you want to get reply. (e.g : supportreply@email.com).","gutenverse-form"),value:t.user_email_reply_to,updateValue:r}),(0,g.jsx)(p.ControlTextarea,{id:"user_email_body",title:(0,s.__)("Messages to User","gutenverse-form"),description:(0,s.__)("Enter your messages to include it in email's body which will be send to user. (e.g : Thank you for your participation in the survey!).","gutenverse-form"),value:t.user_email_body,updateValue:r})]})]})},w=function(e){var t=e.values,r=e.updateValue;return(0,g.jsxs)("div",{className:"form-tab-body",children:[(0,g.jsx)(p.ControlCheckbox,{id:"admin_confirm",title:(0,s.__)("Notification Mail to Admin","gutenverse-form"),description:(0,s.__)("Send notification email to you or your admin. (To be able to send email, please make sure you've setup SMTP correctly).","gutenverse-form"),value:t.admin_confirm,updateValue:r}),t.admin_confirm&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(p.ControlText,{id:"admin_email_subject",title:(0,s.__)("Email Subject","gutenverse-form"),description:(0,s.__)("This will be your email's subject or title. (e.g : User submission).","gutenverse-form"),value:t.admin_email_subject,updateValue:r}),(0,g.jsx)(p.ControlText,{id:"admin_email_to",title:(0,s.__)("Email's Recipient","gutenverse-form"),description:(0,s.__)('Enter admin email where you want to send mail (For multiple email addresses please use "," as separator).',"gutenverse-form"),value:t.admin_email_to,updateValue:r}),(0,g.jsx)(p.ControlText,{id:"admin_email_from",title:(0,s.__)("Email's Sender","gutenverse-form"),description:(0,s.__)("Enter the sender email by which you want to send email to admin. (Please make sure you use the same email in your SMTP setup).","gutenverse-form"),value:t.admin_email_from,updateValue:r}),(0,g.jsx)(p.ControlText,{id:"admin_email_reply_to",title:(0,s.__)("Email's Reply Target","gutenverse-form"),description:(0,s.__)("Enter email where admin can reply/ you want to get reply. (e.g : admnreply@email.com).","gutenverse-form"),value:t.admin_email_reply_to,updateValue:r}),(0,g.jsx)(p.ControlTextarea,{id:"admin_note",title:(0,s.__)("Messages to Admin","gutenverse-form"),description:(0,s.__)("Enter your messages to include it in email's body which will be send to admin. (e.g : A submission from user with the following data.).","gutenverse-form"),value:t.admin_note,updateValue:r})]})]})};const x=function(t){var r=i((0,e.useState)("general"),2),n=r[0],o=r[1],l=i((0,_.isEmpty)(window.GutenverseConfig)?(0,e.useState)(!1):(0,e.useState)(window.GutenverseConfig.hideFormNotice),2),m=l[0],p=l[1],y={general:(0,s.__)("General","gutenverse-form"),confirmation:(0,s.__)("Confirmation","gutenverse-form"),notification:(0,s.__)("Notification","gutenverse-form")},x=(0,v.applyFilters)("gutenverse.form.tab.confirmation",(0,g.jsx)(j,b({},t)),t),O=(0,v.applyFilters)("gutenverse.form.tab.notification",(0,g.jsx)(w,b({},t)),t);return(0,g.jsxs)("div",{children:[!m&&(0,g.jsx)("div",{className:"form-notice-wrapper",children:(0,g.jsx)(d.AlertControl,{children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{children:(0,g.jsxs)("p",{children:[(0,s.__)("Please make sure you have setup SMTP first to be able to use this form full functionality, otherwise the form will not be able to send email. ","gutenverse-form"),(0,s.__)("Please check this ","gutenverse-form"),(0,g.jsx)("a",{href:"https://gutenverse.com/docs/how-to-setup-smtp",children:(0,s.__)("documentation","gutenverse-form")}),(0,s.__)(" on how to use our form.","gutenverse-form")]})}),(0,g.jsx)("div",{className:"gutenverse-close",onClick:function(){p(!0),c()({path:"gutenverse-client/v1/notice/close",method:"POST",data:{id:"form_action_notice"}}).then((function(){}))},children:(0,g.jsx)(u.IconCloseSVG,{size:14})})]})})}),(0,g.jsx)("div",{className:"form-notice-wrapper",children:(0,g.jsx)(a.CardBannerPro,{title:(0,s.__)("Upgrade to Gutenverse Pro","gutenverse-form"),description:(0,s.__)("Explore the full potential of Gutenverse Form","gutenverse-form"),backgroundImg:"card-banner-bg-form.png"})}),(0,g.jsx)("div",{className:"form-tab-header",children:Object.keys(y).map((function(e){var t=y[e],r=f()("header-item",{active:e===n});return(0,g.jsx)("div",{className:r,onClick:function(){return function(e){o(e)}(e)},children:t},e)}))}),"general"===n&&(0,g.jsx)(h,b({},t)),"confirmation"===n&&x,"notification"===n&&O]})};function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=function(){var t=i((0,e.useState)(!1),2),r=t[0],o=t[1],l=i((0,e.useState)({title:"Form Action"}),2),m=l[0],f=l[1],d=i((0,e.useState)(!1),2),p=d[0],_=d[1],y=function(e,t){f(S(S({},m),{},n({},e,t)))};return(0,e.useEffect)((function(){(0,a.u)(".page-title-action").on("click",(function(e){e.preventDefault(),o((function(e){return!e}))}));var e=(0,v.applyFilters)("gutenverse.form.tab.firstLoad",{},null);f(S(S({},m),e))}),[]),(0,g.jsx)(a.DrawerWrapper,{setOpen:o,open:r,children:function(e){var t=e.closeDrawer;return(0,g.jsxs)(a.DrawerContainer,{children:[(0,g.jsx)(a.DrawerHeader,{children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h3",{children:(0,s.__)("Create Form Action","gutenverse-form")}),(0,g.jsx)("div",{className:"gutenverse-close",onClick:function(){return t()},children:(0,g.jsx)(u.IconCloseSVG,{size:20})})]})}),(0,g.jsx)(a.DrawerBody,{children:(0,g.jsx)(x,{values:m,updateValue:y})}),(0,g.jsx)(a.DrawerFooter,{children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"gutenverse-button create",onClick:function(){return _(!0),void c()({path:"gutenverse-form-client/v1/form-action/create",method:"POST",data:{form:m}}).then((function(){_(!1),location.reload()}))},children:p?(0,s.__)("Saving...","gutenverse-form"):(0,s.__)("Create Form","gutenverse-form")}),(0,g.jsx)("div",{className:"gutenverse-button cancel",onClick:function(){return t()},children:(0,s.__)("Cancel","gutenverse-form")})]})})]})}})};const P=function(t){var r=document.getElementsByTagName("body")[0],n=(0,g.jsx)(C,S({},t));return(0,e.createPortal)(n,r)};function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=function(){var t=i((0,e.useState)(!1),2),r=t[0],o=t[1],l=i((0,e.useState)({}),2),m=l[0],f=l[1],d=i((0,e.useState)(!0),2),p=d[0],v=d[1],_=i((0,e.useState)(!1),2),y=_[0],b=_[1],h=i((0,e.useState)(null),2),j=h[0],w=h[1],O=function(e,t){f(k(k({},m),{},n({},e,t)))};return(0,e.useEffect)((function(){(0,a.u)(".type-gutenverse-form .edit a, .type-gutenverse-form .row-title").on("click",(function(e){e.preventDefault();var t=(0,a.u)(e.target).closest(".type-gutenverse-form").attr("id");o(!0),w(t.replace("post-",""))}))}),[]),(0,e.useEffect)((function(){v(!0),null!==j&&c()({path:"gutenverse-form-client/v1/form-action/".concat(j),method:"GET"}).then((function(e){f(e),v(!1)}))}),[j]),(0,g.jsx)(a.DrawerWrapper,{setOpen:o,open:r,children:function(e){var t=e.closeDrawer;return(0,g.jsxs)(a.DrawerContainer,{children:[(0,g.jsx)(a.DrawerHeader,{children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h3",{children:(0,s.__)("Edit Form Action","gutenverse-form")}),(0,g.jsx)("div",{className:"gutenverse-close",onClick:function(){return t()},children:(0,g.jsx)(u.IconCloseSVG,{size:20})})]})}),(0,g.jsx)(a.DrawerBody,{children:p?(0,g.jsx)(a.FormActionSkeleton,{}):(0,g.jsx)(x,{values:m,updateValue:O})}),!p&&(0,g.jsx)(a.DrawerFooter,{children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"gutenverse-button create",onClick:function(){return b(!0),void c()({path:"gutenverse-form-client/v1/form-action/edit",method:"POST",data:{form:k(k({},m),{},{id:j})}}).then((function(){b(!1),location.reload()}))},children:y?(0,s.__)("Saving...","gutenverse-form"):(0,s.__)("Edit Form","gutenverse-form")}),(0,g.jsx)("div",{className:"gutenverse-button cancel",onClick:function(){return t()},children:(0,s.__)("Cancel","gutenverse-form")})]})})]})}})};const D=function(t){var r=document.getElementsByTagName("body")[0],n=(0,g.jsx)(E,k({},t));return(0,e.createPortal)(n,r)},V=window.wp.domReady;r.n(V)()((function(){var t=document.getElementById("gutenverse-form-action");t&&((0,v.doAction)("gutenverse.before.register.form"),(0,e.createRoot)(t).render((0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(P,{}),(0,g.jsx)(D,{})]})))}))})()})();